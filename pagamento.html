const carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
console.log("Carrinho no pagamento:", carrinho); // Verificação do conteúdo do carrinho

const resumoPedido = document.getElementById("resumoPedido");

let total = 0;

if (carrinho.length === 0) {
  resumoPedido.innerHTML = "<p>Seu carrinho está vazio.</p>";
} else {
  carrinho.forEach((produto) => {
    total += produto.preco;
    const produtoDiv = document.createElement("div");
    produtoDiv.innerHTML = `
      <h3>${produto.nome}</h3>
      <p>Preço: R$ ${produto.preco.toFixed(2)}</p>
    `;
    resumoPedido.appendChild(produtoDiv);
  });

  const totalDiv = document.createElement("div");
  totalDiv.innerHTML = `<h3>Total: R$ ${total.toFixed(2)}</h3>`;
  resumoPedido.appendChild(totalDiv);
}

document.getElementById("confirmarPagamento").addEventListener("click", () => {
  if (carrinho.length === 0) {
    alert("Seu carrinho está vazio!");
  } else {
    alert("Pagamento confirmado! Agradecemos pela sua compra.");
    localStorage.removeItem("carrinho"); // limpa o carrinho
    window.location.href = "index.html"; // redireciona para home
  }
});
